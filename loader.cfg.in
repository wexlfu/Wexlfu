#textdomain wesnoth-Wexlfu

#define WXFU
@VERSION@#enddef

# Wesnoth EXtension Library For Utility
# Also includes extensions to core as appropriate to implement the "Wexlfu" shared history.

# Expected config:
# WXFU_CONFIG_BINARY_PATH, WXFU_CONFIG_PREFIX

#define WXFU_LOAD path
	{{WXFU_CONFIG_PREFIX}/{path}}
#enddef

[binary_path]
	path={WXFU_CONFIG_BINARY_PATH}/
[/binary_path]

# Create wexlfu table.
[lua]
	code = <<
		wexlfu = {
			config = {},
		}
	>>
[/lua]

# Set path variables, expanded from WML macros.
[lua]
	code = "
		wexlfu.config.prefix = '{WXFU_CONFIG_PREFIX}'
		wexlfu.config.binary_path = '{WXFU_CONFIG_BINARY_PATH}'
"
[/lua]

[lua]
	code = <<
		wesnoth.require(wexlfu.config.prefix .. "/lua.lua")
	>>
[/lua]

#ifdef EDITOR
[editor_group]
	id = "wesnoth-Wexlfu"
	name = _ "Wexlfu"
	icon = "group_custom"
[/editor_group]
#else
{./macros}
{./characters}

[units]
	{./units}
[/units]
#endif
